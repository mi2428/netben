nodes:
  - name: R1
    image: docker.io/nicolaka/netshoot:latest
    interfaces:
      - { name: net0, type: direct, args: R2#net0 }
      - { name: net1, type: direct, args: PE#net1 }

  - name: R2
    image: docker.io/nicolaka/netshoot:latest
    interfaces:
      - { name: net0, type: direct, args: R1#net0 }
      - { name: net1, type: direct, args: CE#net1 }

  - name: PE
    image: docker.io/nicolaka/netshoot:latest
    interfaces:
      - { name: net0, type: direct, args: C1#net0 }
      - { name: net1, type: direct, args: R1#net1 }

  - name: CE
    image: docker.io/nicolaka/netshoot:latest
    interfaces:
      - { name: net0, type: direct, args: C2#net0 }
      - { name: net1, type: direct, args: R2#net1 }

  - name: C1
    image: docker.io/nicolaka/netshoot:latest
    interfaces:
      - { name: net0, type: direct, args: PE#net0 }

  - name: C2
    image: docker.io/nicolaka/netshoot:latest
    interfaces:
      - { name: net0, type: direct, args: CE#net0 }

node_configs:
  - name: R1
    cmds:
      - cmd: sysctl -wq net.ipv6.conf.all.forwarding=1
      #- cmd: sysctl -wq net.vrf.strict_mode=1

  - name: R2
    cmds:
      - cmd: sysctl -wq net.ipv6.conf.all.forwarding=1
      #- cmd: sysctl -wq net.vrf.strict_mode=1

  - name: PE
    cmds:
      - cmd: sysctl -wq net.ipv6.conf.all.forwarding=1
      #- cmd: sysctl -wq net.vrf.strict_mode=1

  - name: CE
    cmds:
      - cmd: sysctl -wq net.ipv6.conf.all.forwarding=1
      #- cmd: sysctl -wq net.vrf.strict_mode=1

  - name: C1
    cmds:
      - cmd: nohup python3 -m http.server 80 &

  - name: C2
    cmds:
      - cmd: nohup python3 -m http.server 80 &

